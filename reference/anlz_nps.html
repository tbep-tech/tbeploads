<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Calculate non-point source (NPS) loads for Tampa Bay — anlz_nps • tbeploads</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Calculate non-point source (NPS) loads for Tampa Bay — anlz_nps"><meta name="description" content="Calculate non-point source (NPS) loads for Tampa Bay"><meta property="og:description" content="Calculate non-point source (NPS) loads for Tampa Bay"><meta property="og:image" content="https://tbep-tech.github.io/tbeploads/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">tbeploads</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/tbeploads.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/tbep-tech/tbeploads/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Calculate non-point source (NPS) loads for Tampa Bay</h1>
      <small class="dont-index">Source: <a href="https://github.com/tbep-tech/tbeploads/blob/main/R/anlz_nps.R" class="external-link"><code>R/anlz_nps.R</code></a></small>
      <div class="d-none name"><code>anlz_nps.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Calculate non-point source (NPS) loads for Tampa Bay</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">anlz_nps</span><span class="op">(</span></span>
<span>  yrrng <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2021-01-01"</span>, <span class="st">"2023-12-31"</span><span class="op">)</span>,</span>
<span>  <span class="va">tbbase</span>,</span>
<span>  <span class="va">rain</span>,</span>
<span>  <span class="va">mancopth</span>,</span>
<span>  <span class="va">pincopth</span>,</span>
<span>  <span class="va">lakemanpth</span>,</span>
<span>  <span class="va">tampabypth</span>,</span>
<span>  <span class="va">bellshlpth</span>,</span>
<span>  <span class="va">vernafl</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">T</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-yrrng">yrrng<a class="anchor" aria-label="anchor" href="#arg-yrrng"></a></dt>
<dd><p>A vector of two dates in 'YYYY-MM-DD' format, specifying the date range to retrieve flow data. Default is from '2021-01-01' to '2023-12-31'.</p></dd>


<dt id="arg-tbbase">tbbase<a class="anchor" aria-label="anchor" href="#arg-tbbase"></a></dt>
<dd><p>data frame containing polygon areas for the combined data layer of bay segment, basin, jurisdiction, land use data, and soils, see details</p></dd>


<dt id="arg-rain">rain<a class="anchor" aria-label="anchor" href="#arg-rain"></a></dt>
<dd><p>data frame of rainfall data, see details</p></dd>


<dt id="arg-mancopth">mancopth<a class="anchor" aria-label="anchor" href="#arg-mancopth"></a></dt>
<dd><p>character, path to the Manatee County water quality data file, see details</p></dd>


<dt id="arg-pincopth">pincopth<a class="anchor" aria-label="anchor" href="#arg-pincopth"></a></dt>
<dd><p>character, path to the Pinellas County water quality data file, see details</p></dd>


<dt id="arg-lakemanpth">lakemanpth<a class="anchor" aria-label="anchor" href="#arg-lakemanpth"></a></dt>
<dd><p>character, path to the file containing the Lake Manatee flow data, see details</p></dd>


<dt id="arg-tampabypth">tampabypth<a class="anchor" aria-label="anchor" href="#arg-tampabypth"></a></dt>
<dd><p>character, path to the file containing the Tampa Bypass flow data, see details</p></dd>


<dt id="arg-bellshlpth">bellshlpth<a class="anchor" aria-label="anchor" href="#arg-bellshlpth"></a></dt>
<dd><p>character, path to the file containing the Bell shoals data, see details</p></dd>


<dt id="arg-vernafl">vernafl<a class="anchor" aria-label="anchor" href="#arg-vernafl"></a></dt>
<dd><p>character vector of file path to Verna Wellfield atmospheric concentration data</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>logical indicating whether to print verbose output</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A data frame of non-point source loads for Tampa Bay, including columns for year, month, basin, bay segment, basin area (hectares), and loads for water, total nitrogen (TN), total phosphorus (TP), total suspended solids (TSS), and biochemical oxygen demand (BOD).</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The function estimates non-point source (NPS) loads for Tampa Bay by combining ungaged and gaged NPS loads. Ungaged loads are estimated using rainfall, flow, event mean concentration, land use, and soils data, while gaged loads are estimated using water quality data and flow data. The function also incorporates atmospheric concentration data from the Verna Wellfield site.</p>
<p>The following functions are used internally and are provided here for reference on the components used in the calculations:</p>
<ul><li><p><code><a href="anlz_nps_ungaged.html">anlz_nps_ungaged</a></code>: Estimates ungaged NPS loads.</p></li>
<li><p><code><a href="anlz_nps_gaged.html">anlz_nps_gaged</a></code>: Estimates gaged NPS loads.</p></li>
<li><p><code><a href="util_prepverna.html">util_prepverna</a></code>: Prepares and fills missing data with five-year means for the Verna Wellfield site data.</p></li>
<li><p><code><a href="util_nps_getflow.html">util_nps_getflow</a></code>: Gets flow estimates for NPS gaged and ungaged calculations.</p></li>
<li><p><code><a href="util_nps_getusgsflow.html">util_nps_getusgsflow</a></code>: Gets USGS flow data for NPS calculations, used in <code><a href="util_nps_getflow.html">util_nps_getflow</a></code>.</p></li>
<li><p><code><a href="util_nps_getextflow.html">util_nps_getextflow</a></code>: Gets external flow data and contacts (Lake Manatee, Tampa Bypass, and Bell Shoals), used in <code><a href="util_nps_getflow.html">util_nps_getflow</a></code>.</p></li>
<li><p><code><a href="util_nps_getwq.html">util_nps_getwq</a></code>: Gets water quality data for NPS gaged calculations (for <code>mancopth</code>, <code>pincopth</code>, and Hillsborough County data).</p></li>
<li><p><code><a href="util_getrain.html">util_getrain</a></code>: Gets rainfall data for NPS ungaged calculations, as provided in <code><a href="rain.html">rain</a></code>.</p></li>
<li><p><code><a href="util_nps_tbbase.html">util_nps_tbbase</a></code>: Gets the combined spatial data layer for NPS ungaged calculations, as provided in <code><a href="tbbase.html">tbbase</a></code>.</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">tbbase</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">rain</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">mancopth</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">'extdata/nps_wq_manco.txt'</span>, package <span class="op">=</span> <span class="st">'tbeploads'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">pincopth</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">'extdata/nps_wq_pinco.txt'</span>, package <span class="op">=</span> <span class="st">'tbeploads'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">lakemanpth</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">'extdata/nps_extflow_lakemanatee.xlsx'</span>, package <span class="op">=</span> <span class="st">'tbeploads'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">tampabypth</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">'extdata/nps_extflow_tampabypass.xlsx'</span>, package <span class="op">=</span> <span class="st">'tbeploads'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">bellshlpth</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">'extdata/nps_extflow_bellshoals.xls'</span>, package <span class="op">=</span> <span class="st">'tbeploads'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">vernafl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">'extdata/verna-raw.csv'</span>, package <span class="op">=</span> <span class="st">'tbeploads'</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">anlz_nps</span><span class="op">(</span>yrrng <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'2021-01-01'</span>, <span class="st">'2023-12-31'</span><span class="op">)</span>, <span class="va">tbbase</span>, <span class="va">rain</span>, <span class="va">mancopth</span>, <span class="va">pincopth</span>,</span></span>
<span class="r-in"><span>         <span class="va">lakemanpth</span>, <span class="va">tampabypth</span>, <span class="va">bellshlpth</span>, <span class="va">vernafl</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Marcus Beck, Ed Sherwood, Ray Pribble.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

